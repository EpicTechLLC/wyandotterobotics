<script is:inline async src="https://www.googletagmanager.com/gtag/js?id=G-SF6B4NRXLE"></script>
<script is:inline>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    // eslint-disable-next-line prefer-rest-params
    dataLayer.push(arguments);
  }
  gtag('js', new Date());
  gtag('config', 'G-SF6B4NRXLE', { debug_mode: true, page_path: window.location.pathname + window.location.search });
  (function () {
    const params = new URLSearchParams(window.location.search);
    const utm_source = params.get('utm_source');
    const utm_medium = params.get('utm_medium');
    const utm_campaign = params.get('utm_campaign');

    if (utm_source && utm_medium) {
      sessionStorage.setItem('utm_source', utm_source);
      sessionStorage.setItem('utm_medium', utm_medium);
      sessionStorage.setItem('utm_campaign', utm_campaign);
    }

    const storedSource = sessionStorage.getItem('utm_source');
    const storedMedium = sessionStorage.getItem('utm_medium');
    const storedCampaign = sessionStorage.getItem('utm_campaign');

    if (storedSource && storedMedium) {
      console.log('âœ… Sending UTM Data to GA4:', storedSource, storedMedium, storedCampaign);

      // Reconstruct the full URL with UTM parameters
      const newPageLocation =
      window.location.origin +
      window.location.pathname +
      `?utm_source=${storedSource}&utm_medium=${storedMedium}&utm_campaign=${storedCampaign}`;

      gtag('config', 'G-SF6B4NRXLE', {
        page_location: newPageLocation,
        send_page_view: true,
		debug_mode: true,
      });
    }
  })();
</script>
